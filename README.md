# クラウドプログラミング演習　最終課題レポート

## 本レポートについて

本レポートでは、最終課題として作成したプログラムの概要や使い方などについて説明する。

## プログラムの概要

このプログラムの名称は、SevenSweets Assistantである。このプログラムのテーマは、「ユーザーにおすすめのスイーツを提案するアシスタント」である。
このプログラムは、コンビニの菓子類を予めデータベースに登録しておくことで、ユーザーが指定した条件に応じた菓子類を選び出し、それを表示することができる。
このプログラムには、データベース検索機能と、データベース登録機能という、大きく分けて2つの機能がある。それぞれの機能ごとにhtmlファイルが分かれている。
データベース検索機能を担うのがindex.htmlであり、データベース登録機能を担うのがconfigure.htmlである。機能ごとにページを分けたことで、UIの複雑化を回避している。
データベース検索機能としては、「データベースへの登録日」「価格」の2つを検索キーとした簡易的な検索機能を持つ。
検索結果が表示されるのは常に1件だけであるため、いつも同じ菓子ばかりが表示されないよう、検索結果の上位数件分をランダムに選んで表示するよう実装している。

## プログラムの使用方法

本節では、このプログラムの使用方法について述べる。

### 検索機能の使用方法

まずは検索機能について述べる。プログラムを起動すると、図1に示すとおりの画面が表示される。これが検索ページである。
検索ページには、「今日の気分は？」というラベルの貼られたプルダウンメニューがあり、ここから検索キーを選ぶことができる。
プルダウンメニューには4つの検索キーが用意されており、それぞれ「新しいものを試したい」「安いものから選びたい」「高級なものを試したい」「カロリーも気にしたい」となっている。
このうち、カロリーを検索キーとした検索機能は実装されていないので、それ以外の3つが現状では機能する状態である。
検索キーを選んだ後は、「さがす」と書かれたボタンを押下することで、おすすめの菓子類が表示される。実際に菓子類を表示した様子を図2に示す。
表示された菓子類のうち、菓子類の名称はハイパーリンクとなっている。
今回の「イタリア栗の濃厚モンブラン」の例では、セブン-イレブン・ジャパンの[イタリア栗の濃厚モンブランの商品Webページ](https://www.sej.co.jp/products/a/item/113298/)へリンクしている。

![Fig.1: Image of Search Page](https://raw.githubusercontent.com/k19rs083/SevenSweetsAssistant/master/search_page.png)

*図1: 検索ページを表示した様子*

![Fig.2: Image of Search Function](https://raw.githubusercontent.com/k19rs083/SevenSweetsAssistant/master/search_result.png)

*図2: 検索結果を表示した様子*

検索ページには、「さがす」以外にも、「これにする」「Main」「Config」と書かれたボタンがある。
「これにする」ボタン、「Main」ボタンは現在は機能しない。「Config」ボタンは、押下することで、データベース登録ページへ遷移できる。

### データベース登録機能の使用方法

本節ではデータベース登録機能について述べる。上記で説明した検索ページにおいて、「Config」ボタンを押下することで本ページへ遷移できる。ページの外観については図3で示す。
データベースに登録できるフィールドは、商品名、商品のURI（URL）、商品の価格の3つである。原則としてこの3つのフィールドをすべて入力することを想定してプログラムを作成している。
フィールドに情報を入力した後は、画面内の「登録」ボタンを押下することで、商品情報を登録できる。

本ページには、データベース登録機能のほかに、データベースに登録されたデータを一覧表示する機能を備えている。この機能は「一覧表示」ボタンを押下することで利用できる。

![Fig.3: Image of Database Register Page](https://raw.githubusercontent.com/k19rs083/SevenSweetsAssistant/master/regist_page.png)

*図3: データベース登録ページを表示した様子*

データベース登録ページには、「登録」「一覧表示」以外にも、「Main」「Config」と書かれたボタンがある。
「Config」ボタンは現在は機能しない。「Main」ボタンは、押下することで、検索ページへ遷移できる。

## 実装できていない機能

もともと実装する予定であったものの、実装に至っていない機能が複数ある。カロリーを検索キーとした検索機能は、当初は実装する予定であったものの、データベースへの登録作業が煩雑化するといった理由から省略した。
また、商品を食べた回数を記録し、その回数を検索キーとして検索する機能（例えば、過去に食べたことのない商品を優先して表示するなど）を実装予定であったが、これは技量および時間の不足により断念した。
検索ページに実装されている「これにする」ボタンは、元々は商品を食べた回数を記録するために利用する予定だったものである。

## このプログラムを作成した経緯

このプログラムの着想元は、ちょまど氏が2018年より公開している公開しているこちらの動画である。[[2分30秒動画] HoloLens で セブンスイーツアプリ作ってみた [Microsoft Custom Vision's Object Detection with HoloLens]](https://www.youtube.com/watch?v=y2CLT9LgmOk)

プログラムのテーマおよび名称はこの動画に由来しているが、ソースコードの実装などで参考にしている点はなく、概ね独自の実装となっている。
このテーマでの制作を決めた理由は、私自身もコンビニの菓子類が好みで、自分へのご褒美として購入することがあるが、種類が多くて選ぶのに迷ってしまう、といった理由がある。

## 参考にしたプログラム

このプログラムそのものは、授業内で提示された「mbaas_regist2020」をベースにして制作されている。
大部分を改変しているものの、jQueryを使ったイベントリスナーや、データベース登録機能などの実装において参考となっている。
また、データベース検索機能の実装には、授業内で提示された「mbaas_update2020」を参考としている。
そのほかに参考したWebサイトは以下の通りである。

* [Math.random() - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Math/random) - ランダムな数字を発生させる関数の実装に利用した。
* [文字列の折り返しを表現するCSSプロパティ - Qiita](https://qiita.com/gcyata/items/353658a7bdc1e7395337) - HTMLのテーブル内において、長い文字列を折り返す方法を参考にした。
